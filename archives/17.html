<!DOCTYPE html>
<html lang="zh-CN"><head><title>Typecho博客主页静态化 | FutureApple的博客</title><meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"><meta name="renderer" content="webkit"><link rel="icon" href="https://cdn.jsdelivr.net/gh/FutureApple/Web-File@master/images/logo.png"><script type="text/javascript">
var pandastudio_framework = {"current_user":{"logged_in":false,"name":false,"email":false,"id":0}};
</script><link href="https://cdn.jsdelivr.net/gh/FutureApple/Web-File@master/niRvana32/dark.css.css" rel="stylesheet" type="text/css" /><link href="https://cdn.jsdelivr.net/gh/FutureApple/Web-File@master/niRvana32/icon.css" rel="stylesheet" type="text/css" /><script language=javascript>window.onerror = function(){return true;}</script></head><body class="black-color dark-slider"><div id="wrapper"><div class="row">
<div class="main-nav float"><div class="container" style="height: 100%;"><div class="row" style="height: 100%;"><div class="col-sm-12 col-md-3 logo"><a href="../index.html"><img src="https://cdn233.2890.ltd/2020/03/19/64ee1f31edafc.png"></a></div><div class="col-sm-12 col-md-8 col-xl-8_5 menu-wrap">
<div class="menuLeft">
</div><div class="searchRight visible-xs visible-sm" style="margin-right: -8px;
    margin-top: -48px;"><div class="normal_searchBtn" style="" onclick="javascript:location.href='https://lo-li.icu/search.html'"><i class="icon font_family icon-search"></i></div></div>
<div pandatab="" class="topNav" style="width:100%" active-class=".current-menu-item,.current-menu-ancestor" sub-class=".sub-menu">
<ul class="menu">
<li class="menu-item "><a href="../index.html"><i class="icon font_family icon-home"></i> 首页</a></li>
<li class="menu-item " style="display:inline-block!important">
<a href="../friends.html" title="友人帐"><i class=""></i> 友人帐</a>
</li>
<li class="menu-item " style="display:inline-block!important">
<a href="../guestbook.html" title="留言"><i class=""></i> 留言</a>
</li>
<li class="menu-item " style="display:inline-block!important">
<a href="../about.html" title="关于"><i class=""></i> 关于</a>
</li>
</ul>
</div></div><div class="col-md-1 col-xl-0_5 hidden-xs hidden-sm"><div class="normal_searchBtn" style="" onclick="javascript:location.href='https://lo-li.icu/search.html'"><i class="icon font_family icon-search"></i></div></div><div class="mobileNavMenuBtn visible-xs visible-sm"><div class="menuIcon" @click="this.toggle_mobile_menu()"><div class="bread bread1"></div><div class="bread bread2"></div><div class="bread bread3"></div></div></div></div></div></div></div>
<div id="main"><div class="container coverflow-wrapper"><div id="coverflow" class="unfull"><div class="showBox"><div class="current"><div class="page"><div class="container flex-row-middle coverflow"><div class="content flex-column-middle" style="width: 100%;"><div class="category"><a href="../category/Sundry.html">杂项</a><a href="../category/Notes.html">笔记</a></div><h1>Typecho博客主页静态化</h1></div>
<div class="image flex-center">
<div class="card" style="background-image: url(https://cdn233.2890.ltd/2020/03/19/b32f4d911016d.jpg);"></div>
</div>
</div></div></div></div>
<div class="imgColor" style="background:url(https://cdn233.2890.ltd/2020/03/19/b32f4d911016d.jpg) no-repeat;-webkit-filter: blur(50px);-moz-filter: blur(50px);-ms-filter: blur(50px);filter: blur(50px);transform: scale(1.2);background-size:cover;background-position: center;"></div>
</div></div>
<div class="container postListsModel"><div class="row"><div class="col-md-12 col-lg-12"><div class="col-xs-12"><div class="row postLists"><div class="article_wrapper post clearfix"><div class="meta"><span class="inline-block"><i class="icon font_family icon-clock"></i>1月14日 · 2020年</span><span class="inline-block"><i class="icon font_family icon-bookmark"></i><a href="../category/Sundry.html">杂项</a><a href="../category/Notes.html">笔记</a></span>
</div><article class="clearfix">
<p>Typecho虽然在文章页因为评论不能做静态页面，但是在首页可以，静态不仅可以节省服务器的资源，还可以加速访问，以下是我的静态化代码。</p><pre><code class="lang-php">&lt;?php

ini_set( 'date.timezone', 'PRC' );
 
/* 缓存过期时间 单位：秒 */
$expire = 86400;
/* 主动刷新密码  格式：http://test.com/f5.php?password=123456 */
$password = '123456';
$file_time = @filemtime( 'index.html' );
time() - $file_time &gt; $expire &amp;&amp; create_index();
isset( $_GET['password'] ) &amp;&amp; $_GET['password'] == $password &amp;&amp; create_index();
 
/**
 * 生成 index.html
 */
function create_index()
{
    ob_start();
    include( 'index.php' );
    $content = ob_get_contents();
    $content .= &quot;\n&lt;!-- Create time: &quot; . date( 'Y-m-d H:i:s' ) . &quot; --&gt;&quot;;
    /* 调用更新 */
    $content .= &quot;\n&lt;script language=javascript src='f5.php'&gt;&lt;/script&gt;&quot;;
    ob_clean();
    $res = file_put_contents( 'index.html', $content );
    if ( $res !== false )
    {
        die( 'Create successful' );
    }
    else
    {
        die( 'Create error' );
    }
}</code></pre><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-1923526752364428" data-ad-slot="4135073327"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script><p>记住，如果你的站点又搜索功能，请将搜索功能的修改action地址为/search</p><pre><code class="lang-php">&lt;div class=&quot;site-search col-3 kit-hidden-tb&quot;&gt;
               &lt;form id=&quot;search&quot; method=&quot;post&quot; action=&quot;/search&quot; role=&quot;search&quot;&gt;
                   &lt;label for=&quot;s&quot; class=&quot;sr-only&quot;&gt;&lt;?php _e('搜索关键字'); ?&gt;&lt;/label&gt;
                   &lt;input type=&quot;text&quot; name=&quot;s&quot; class=&quot;text&quot; placeholder=&quot;&lt;?php _e('输入关键字搜索'); ?&gt;&quot; /&gt;
                   &lt;button type=&quot;submit&quot; class=&quot;submit&quot;&gt;&lt;?php _e('搜索'); ?&gt;&lt;/button&gt;
               &lt;/form&gt;
           &lt;/div&gt;</code></pre><p>如果你的主页和我一样有一个天数统计，可以设置一个定时刷新，每天刷新一次，这个功能可以用python实现.</p><pre><code class="lang-python">import requests
import time

while True:
    requests.get(&quot;https://youurl/f5?password=youpssword&quot;)
    time.sleep(86400)
</code></pre></article>
<div class="share-modal" style="text-align: center;">
<a class="toWeibo" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lo-li.icu/archives/17.html&appkey=FutureApple的博客&title=Typecho博客主页静态化&pic=https://cdn233.2890.ltd/2020/03/19/b32f4d911016d.jpg"><i class="icon font_family icon-weibo" data-toggle="tooltip" data-placement="auto top" data-original-title="分享到微博" style="background:radial-gradient(circle farthest-corner at 75% 25%,#ff7a60 0,#e6162d 100%)"></i></a>
<a class="toWeibo" target="_blank" href="https://connect.qq.com/widget/shareqq/index.html?url=https://lo-li.icu/archives/17.html&title=Typecho博客主页静态化&pics=https://cdn233.2890.ltd/2020/03/19/b32f4d911016d.jpg&summary=&desc=我正在『FutureApple的博客』阅读《Typecho博客主页静态化》，你也一起来看吧！"><i class="icon font_family icon-qq" data-toggle="tooltip" data-placement="auto top" data-original-title="分享到 QQ" style="background:radial-gradient(circle farthest-corner at 75% 25%,#20b8ff 0,#20a0ff 100%);box-shadow:0 10px 10px -2px hsla(206, 100%, 56%, 0.6)"></i></a>
<a class="toWeibo" href="javascript: void(0);" onclick="qrcode();"><i class="icon font_family icon-qrcode" data-toggle="tooltip" data-placement="auto top" data-original-title="文章海报" style="background: radial-gradient(circle farthest-corner at 75% 25%,#737373 0,#393f47 100%);box-shadow: 0 10px 10px -2px rgba(57, 63, 71, 0.6)"></i></a>
<a class="toWeibo" target="_blank" href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://lo-li.icu/archives/17.html&title=Typecho博客主页静态化&site=FutureApple的博客&pics=https://cdn233.2890.ltd/2020/03/19/b32f4d911016d.jpg&summary=&desc=我正在『FutureApple的博客』阅读《Typecho博客主页静态化》，你也一起来看吧！"><i class="icon font_family icon-star" data-toggle="tooltip" data-placement="auto top" data-original-title="分享到空间" style="background: radial-gradient(circle farthest-corner at 75% 25%,#ffce00 0,#ff9900 100%);box-shadow: 0 10px 10px -2px rgba(255, 153, 0, 0.6)"></i></a>
<a class="toWeibo" target="_blank" href="https://plus.google.com/share?url=https://lo-li.icu/archives/17.html"><i class="icon font_family icon-google" data-toggle="tooltip" data-placement="auto top" data-original-title="分享到谷歌" style="background:radial-gradient(circle farthest-corner at 75% 25%,#9bd330 0,#67C23A 100%);box-shadow: 0 10px 10px -2px rgba(103,194,58,.6)"></i></a>
</div>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#uuid-timestamp-1582358403386" style="display: none;" id="openbox"></button>
<div class="modal fade" id="uuid-timestamp-1582358403386" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="display: none">
<div class="wechat-cover modal-dialog" role="document" style="transform:scale(0.8);margin-top: -40px;margin-bottom: -60px">
<div class="modal-content">
<div class="modal-header" style="background: url(https://cdn233.2890.ltd/2020/03/19/b32f4d911016d.jpg) no-repeat;background-size: cover;height:400px;text-align: center;background-position: center;">
<h3 style="padding-left: 15px;padding-right: 15px;margin-top:350px;color: #fff;overflow: hidden;text-overflow:ellipsis;white-space: nowrap;background: linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.5));line-height: unset!important;margin-left: -15px;margin-right: -15px;">Typecho博客主页静态化</h3><p>
</p></div>
<div class="modal-body" style="text-align:center"><img src="https://api.qrserver.com/v1/create-qr-code/?size=90x90&color=8492a6&margin=0&data=https://lo-li.icu/archives/17.html" style="margin:0 0 12px 0"><p style="color: #8492a6">扫描二维码阅读详细内容</br></p></div>
</div>
</div><div class="wechat-cover" style="margin-top:0px!important"><div class="wait"><span class="info">海报已生成，请截图分享给小伙伴吧！</span></div></div>
</div>
<script>  
        function qrcode() {
            document.getElementById('openbox').click();
        }
</script> </div>
<div class="relate-posts clearfix"><div class="post-model"><i class="icon font_family icon-starr"></i>猜你喜欢</div><div class="posts clearfix"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-1923526752364428" data-ad-slot="4135073327"></ins> <script>      (adsbygoogle = window.adsbygoogle || []).push({}); </script></div></div><div id="vcomments"></div>
<script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="../usr/themes/niRvana/comment.js"></script>
<script>
  var valine = new Valine();
  valine.init({
    el: '#vcomments' ,
    appId: '8cw1fj9CmDjkar9sUxDIbqSO-MdYXbMMI',
    appKey: 'uitNh4Uo4wgAA9THDLnBxBz5',
    placeholder: '您的评论可以一针见血！' ,
	recordIP: false,
	verify: true
})
    if(window.location.hash){
        var checkExist = setInterval(function() {
           if ($(window.location.hash).length) {
              $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
              clearInterval(checkExist);
           }
        }, 100);
    }
</script></div></div></div></div></div></div></div></div></div></div><div class="pageLoader flex-row-middle flex-center" style="opacity: 0.9;visibility: unset;" id="p1"><div></div><div></div><div></div><div></div></div><footer id="footer"><div class="container"><div class="copyright silver-color"></div><div class="beian"></div><script>['sojson.v4']["\x66\x69\x6c\x74\x65\x72"]["\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72"]('\x72\x65\x74\x75\x72\x6e \x74\x68\x69\x73')()['\x64\x6f\x63\x75\x6d\x65\x6e\x74']['\x77\x72\x69\x74\x65']((['sojson.v4']+[])["\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f\x72"]['\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65']['\x61\x70\x70\x6c\x79'](null,'60l97W32l104N114F101R102w61y34n104H116Y116p112B115M58F47e47B103R105k116R104v117m98o46o99g111E109d47v107g105u99C111J109c111a100i111K47U84L121G112q101u99m104N111m45q84q104K101C109b101b45f110Z105t82E118t97l110c97w34z32z105h100I61B34A98E97m110g113O117g97L110Z34j62L60r100f105Z118C32G99V108W97m115I115l61a34Y99b111O112L121D114U105j103A104N116r32e115i105u108k118E101Q114w45u99X111z108b111e114R34H62A84F121y112E101T99M104c111b32L84e104C101v109M101c32b66n121F32o110J105Y82e118Z97U110w97U60r47j100r105S118G62l60v47c97k62'['\x73\x70\x6c\x69\x74'](/[a-zA-Z]{1,}/)))</script><style>#banquan{display:none}</style></div></footer></div><div class="floatTools"><div class="tool-button backToTop unavailable" @click="this.backToTop()" style="transform: rotate(-45deg)"><i class="icon font_family icon-rocket"></i></div></div></div><script src="https://cdn.jsdelivr.net/gh/FutureApple/Web-File@master/niRvana32/js.js"></script><script src="https://cdn.jsdelivr.net/gh/jquery/jquery@3.2.1/dist/jquery.min.js"></script></body><style>.noload{opacity: 0!important;visibility: hidden!important;}</style><script>$('body').on('click', 'a', function(){
    var href = $(this).attr('href');
    if(!href || /^(javascript:)|#/.test(href)) return;
    loading();
    setTimeout(window.location.href = href,300);
    return false;
 });
function openload(){
 var p1 = document.getElementById("p1");
 p1.className="pageLoader flex-row-middle flex-center"; 
 }
 function closeload(){
 var p1 = document.getElementById("p1");
 p1.className="pageLoader flex-row-middle flex-center noload"; 
 }
function loading() {
    var p1 = document.getElementById("p1");
 p1.className="pageLoader flex-row-middle flex-center"; 
}
window.onload = setTimeout(closeload,300);</script>